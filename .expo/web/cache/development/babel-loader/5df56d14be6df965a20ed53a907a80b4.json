{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/arjun/Desktop/taste-it-customer/components/screens/onboardingScreens/flavourProfile/FlavourProfile.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createMaterialTopTabNavigator } from \"@react-navigation/material-top-tabs\";\nimport React, { Component } from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport AllergyOptions from \"./AllergyOptions\";\nimport CuisineOptions from \"./CuisineOptions\";\nimport DietTypes from \"./DietTypes\";\nimport H1 from \"../../../texts/H1\";\nimport SpicinessOptions from \"./SpicinessOptions\";\nimport { getSpiciness, getAllergy, getCuisine, getDietType, postChoice } from \"../../../../services/api\";\nvar MaterialTopTabs = createMaterialTopTabNavigator();\n\nvar FlavourProfile = function (_Component) {\n  _inherits(FlavourProfile, _Component);\n\n  var _super = _createSuper(FlavourProfile);\n\n  function FlavourProfile(props) {\n    var _this;\n\n    _classCallCheck(this, FlavourProfile);\n\n    _this = _super.call(this, props);\n\n    _this.onNext = function () {\n      var spicinessArray = _this.getSelectedSpiciness();\n\n      var cuisinesArray = _this.getSelectedCuisines();\n\n      var dietTypesArray = _this.getSelectedDietTypes();\n\n      var allergiesArray = _this.getSelectedAllergies();\n\n      var finalArray = [].concat(_toConsumableArray(spicinessArray), _toConsumableArray(cuisinesArray), _toConsumableArray(dietTypesArray), _toConsumableArray(allergiesArray));\n\n      if (_this.state.isSpiciness !== true || _this.state.isAllergies !== true || _this.state.isCuisines !== true || _this.state.isDietTypes !== true) {\n        for (var i = 0; i < finalArray.length; i++) {\n          postChoice(finalArray[i]).then(function (res) {\n            console.log(res);\n          }, function (error) {\n            console.log(error);\n            Alert.alert(\"Error\", \"Something went wrong! \" + error);\n          });\n        }\n\n        Alert.alert(\"successfull\", \"choices saved\");\n\n        _this.props.navigation.navigate(\"DeliveryInfo1\");\n      } else if (_this.state.isSpiciness === true && _this.state.isAllergies === true && _this.state.isCuisines === true && _this.state.isDietTypes === true) {\n        Alert.alert(\"Choices Missing\", \"Please Select Choices by switching tabs\");\n      }\n    };\n\n    _this.handleSpicinessChange = function (update) {\n      _this.setState({\n        spicinessData: update\n      });\n    };\n\n    _this.handleAllergiesChange = function (update) {\n      _this.setState({\n        allergiesData: update\n      });\n    };\n\n    _this.handleDietTypesChange = function (update) {\n      _this.setState({\n        dietTypesData: update\n      });\n    };\n\n    _this.handleCuisinesChange = function (update) {\n      _this.setState({\n        cuisinesData: update\n      });\n    };\n\n    _this.createTopTabs = function () {\n      return React.createElement(MaterialTopTabs.Navigator, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 7\n        }\n      }, React.createElement(MaterialTopTabs.Screen, {\n        name: \"Allergies\",\n        children: function children() {\n          return React.createElement(AllergyOptions, {\n            allergies: _this.state.allergiesData,\n            updateAllergies: _this.handleAllergiesChange,\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 13\n            }\n          });\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 9\n        }\n      }), React.createElement(MaterialTopTabs.Screen, {\n        name: \"Cuisines\",\n        children: function children() {\n          return React.createElement(CuisineOptions, {\n            cuisines: _this.state.cuisinesData,\n            updateCuisines: _this.handleCuisinesChange,\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 13\n            }\n          });\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 9\n        }\n      }), React.createElement(MaterialTopTabs.Screen, {\n        name: \"Diet Choices\",\n        children: function children() {\n          return React.createElement(DietTypes, {\n            dietTypes: _this.state.dietTypesData,\n            updateDietTypes: _this.handleDietTypesChange,\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 13\n            }\n          });\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 9\n        }\n      }), React.createElement(MaterialTopTabs.Screen, {\n        name: \"Spiciness\",\n        children: function children() {\n          return React.createElement(SpicinessOptions, {\n            spiciness: _this.state.spicinessData,\n            updateSpiciness: _this.handleSpicinessChange,\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 13\n            }\n          });\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 9\n        }\n      }));\n    };\n\n    _this.state = {\n      spicinessData: [],\n      allergiesData: [],\n      dietTypesData: [],\n      cuisinesData: [],\n      isLoaded: true,\n      isSpiciness: true,\n      isCuisines: true,\n      isDietTypes: true,\n      isAllergies: true\n    };\n    _this.handleSpicinessChange = _this.handleSpicinessChange.bind(_assertThisInitialized(_this));\n    _this.getSelectedSpiciness = _this.getSelectedSpiciness.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(FlavourProfile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      getSpiciness().then(function (res) {\n        _this2.setState({\n          isLoaded: false\n        });\n\n        var needData = [];\n\n        for (var i = 0; i < res.length; i++) {\n          needData.push({\n            id: i,\n            key: res[i].choiceDescription,\n            checked: false\n          });\n        }\n\n        _this2.setState({\n          spicinessData: needData\n        });\n      }, function (error) {\n        Alert.alert(\"Error\", \"Something went wrong! \" + error);\n      });\n      getAllergy().then(function (res) {\n        _this2.setState({\n          isLoaded: false\n        });\n\n        var needData = [];\n\n        for (var i = 0; i < res.length; i++) {\n          needData.push({\n            id: i,\n            key: res[i].choiceDescription,\n            checked: false\n          });\n        }\n\n        _this2.setState({\n          allergiesData: needData\n        });\n      }, function (error) {\n        Alert.alert(\"Error\", \"Something went wrong! \" + error);\n      });\n      getDietType().then(function (res) {\n        _this2.setState({\n          isLoaded: false\n        });\n\n        var needData = [];\n\n        for (var i = 0; i < res.length; i++) {\n          needData.push({\n            id: i,\n            key: res[i].choiceDescription,\n            checked: false\n          });\n        }\n\n        _this2.setState({\n          dietTypesData: needData\n        });\n      }, function (error) {\n        Alert.alert(\"Error\", \"Something went wrong! \" + error);\n      });\n      getCuisine().then(function (res) {\n        _this2.setState({\n          isLoaded: false\n        });\n\n        var needData = [];\n\n        for (var i = 0; i < res.length; i++) {\n          needData.push({\n            id: i,\n            key: res[i].choiceDescription,\n            checked: false\n          });\n        }\n\n        _this2.setState({\n          cuisinesData: needData\n        });\n      }, function (error) {\n        Alert.alert(\"Error\", \"Something went wrong! \" + error);\n      });\n    }\n  }, {\n    key: \"getSelectedSpiciness\",\n    value: function getSelectedSpiciness() {\n      var keys = this.state.spicinessData.map(function (k) {\n        return k.key;\n      });\n      var checks = this.state.spicinessData.map(function (k) {\n        return k.checked;\n      });\n      var Selected = [];\n\n      for (var i = 0; i < checks.length; i++) {\n        if (checks[i] == true) {\n          Selected.push(keys[i]);\n        }\n      }\n\n      this.setState({\n        isSpiciness: false\n      });\n      return Selected;\n    }\n  }, {\n    key: \"getSelectedCuisines\",\n    value: function getSelectedCuisines() {\n      var keys = this.state.cuisinesData.map(function (k) {\n        return k.key;\n      });\n      var checks = this.state.cuisinesData.map(function (k) {\n        return k.checked;\n      });\n      var Selected = [];\n\n      for (var i = 0; i < checks.length; i++) {\n        if (checks[i] == true) {\n          Selected.push(keys[i]);\n        }\n      }\n\n      this.setState({\n        isCuisines: false\n      });\n      return Selected;\n    }\n  }, {\n    key: \"getSelectedDietTypes\",\n    value: function getSelectedDietTypes() {\n      var keys = this.state.dietTypesData.map(function (k) {\n        return k.key;\n      });\n      var checks = this.state.dietTypesData.map(function (k) {\n        return k.checked;\n      });\n      var Selected = [];\n\n      for (var i = 0; i < checks.length; i++) {\n        if (checks[i] == true) {\n          Selected.push(keys[i]);\n        }\n      }\n\n      this.setState({\n        isDietTypes: false\n      });\n      return Selected;\n    }\n  }, {\n    key: \"getSelectedAllergies\",\n    value: function getSelectedAllergies() {\n      var keys = this.state.allergiesData.map(function (k) {\n        return k.key;\n      });\n      var checks = this.state.allergiesData.map(function (k) {\n        return k.checked;\n      });\n      var Selected = [];\n\n      for (var i = 0; i < checks.length; i++) {\n        if (checks[i] == true) {\n          Selected.push(keys[i]);\n        }\n      }\n\n      this.setState({\n        isAllergies: false\n      });\n      return Selected;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (this.state.isLoaded) {\n        return React.createElement(View, {\n          style: {\n            flex: 1,\n            justifyContent: \"center\",\n            alignItems: \"center\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 9\n          }\n        }, React.createElement(ActivityIndicator, {\n          size: \"large\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 11\n          }\n        }));\n      } else {\n        return React.createElement(ScrollView, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 9\n          }\n        }, React.createElement(View, {\n          style: styles.page,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 11\n          }\n        }, React.createElement(H1, {\n          h1Text: \"Flavour Profile\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }\n        }), React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }\n        }, \"Tell us what you love\"), React.createElement(NavigationContainer, {\n          independent: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }\n        }, this.createTopTabs()), React.createElement(Button, {\n          title: \"Next\",\n          onPress: function onPress() {\n            _this3.onNext();\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }\n        })));\n      }\n    }\n  }]);\n\n  return FlavourProfile;\n}(Component);\n\nexport { FlavourProfile as default };\nvar styles = StyleSheet.create({\n  page: {\n    marginTop: 50\n  }\n});","map":{"version":3,"sources":["/Users/arjun/Desktop/taste-it-customer/components/screens/onboardingScreens/flavourProfile/FlavourProfile.js"],"names":["NavigationContainer","createMaterialTopTabNavigator","React","Component","AllergyOptions","CuisineOptions","DietTypes","H1","SpicinessOptions","getSpiciness","getAllergy","getCuisine","getDietType","postChoice","MaterialTopTabs","FlavourProfile","props","onNext","spicinessArray","getSelectedSpiciness","cuisinesArray","getSelectedCuisines","dietTypesArray","getSelectedDietTypes","allergiesArray","getSelectedAllergies","finalArray","state","isSpiciness","isAllergies","isCuisines","isDietTypes","i","length","then","res","console","log","error","Alert","alert","navigation","navigate","handleSpicinessChange","update","setState","spicinessData","handleAllergiesChange","allergiesData","handleDietTypesChange","dietTypesData","handleCuisinesChange","cuisinesData","createTopTabs","isLoaded","bind","needData","push","id","key","choiceDescription","checked","keys","map","k","checks","Selected","flex","justifyContent","alignItems","styles","page","StyleSheet","create","marginTop"],"mappings":"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","sourcesContent":["import { NavigationContainer } from \"@react-navigation/native\";\nimport { createMaterialTopTabNavigator } from \"@react-navigation/material-top-tabs\";\nimport React, { Component } from \"react\";\nimport {\n  Text,\n  StyleSheet,\n  ScrollView,\n  View,\n  Button,\n  Alert,\n  ActivityIndicator\n} from \"react-native\";\nimport AllergyOptions from \"./AllergyOptions\";\nimport CuisineOptions from \"./CuisineOptions\";\nimport DietTypes from \"./DietTypes\";\nimport H1 from \"../../../texts/H1\";\nimport SpicinessOptions from \"./SpicinessOptions\";\nimport {\n  getSpiciness,\n  getAllergy,\n  getCuisine,\n  getDietType,\n  postChoice,\n} from \"../../../../services/api\";\n\nconst MaterialTopTabs = createMaterialTopTabNavigator();\n\nexport default class FlavourProfile extends Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      spicinessData: [],\n      allergiesData: [],\n      dietTypesData: [],\n      cuisinesData: [],\n      isLoaded: true,\n      isSpiciness: true,\n      isCuisines: true,\n      isDietTypes: true,\n      isAllergies: true,\n    };\n    this.handleSpicinessChange = this.handleSpicinessChange.bind(this);\n    this.getSelectedSpiciness = this.getSelectedSpiciness.bind(this);\n  }\n  // ***************************************get data from server through api *********************************************/\n  componentDidMount() {\n    getSpiciness().then(\n      (res) => {\n        this.setState({\n          isLoaded: false,\n        });\n        let needData = [];\n        for (let i = 0; i < res.length; i++) {\n          needData.push({\n            id: i,\n            key: res[i].choiceDescription,\n            checked: false,\n          });\n        }\n        this.setState({\n          spicinessData: needData,\n        });\n      },\n      (error) => {\n        Alert.alert(\"Error\", `Something went wrong! ${error}`);\n      }\n    );\n    getAllergy().then(\n      (res) => {\n        this.setState({\n          isLoaded: false,\n        });\n        let needData = [];\n        for (let i = 0; i < res.length; i++) {\n          needData.push({\n            id: i,\n            key: res[i].choiceDescription,\n            checked: false,\n          });\n        }\n        this.setState({\n          allergiesData: needData,\n        });\n        // console.log(needData);\n      },\n      (error) => {\n        Alert.alert(\"Error\", `Something went wrong! ${error}`);\n      }\n    );\n    getDietType().then(\n      (res) => {\n        this.setState({\n          isLoaded: false,\n        });\n        let needData = [];\n        for (let i = 0; i < res.length; i++) {\n          needData.push({\n            id: i,\n            key: res[i].choiceDescription,\n            checked: false,\n          });\n        }\n        this.setState({\n          dietTypesData: needData,\n        });\n      },\n      (error) => {\n        Alert.alert(\"Error\", `Something went wrong! ${error}`);\n      }\n    );\n    getCuisine().then(\n      (res) => {\n        this.setState({\n          isLoaded: false,\n        });\n        let needData = [];\n        for (let i = 0; i < res.length; i++) {\n          needData.push({\n            id: i,\n            key: res[i].choiceDescription,\n            checked: false,\n          });\n        }\n        this.setState({\n          cuisinesData: needData,\n        });\n      },\n      (error) => {\n        Alert.alert(\"Error\", `Something went wrong! ${error}`);\n      }\n    );\n  }\n\n  // *************************************** get desired arrays from all the choices*********************************************/\n  getSelectedSpiciness() {\n    const keys = this.state.spicinessData.map((k) => k.key);\n    var checks = this.state.spicinessData.map((k) => k.checked);\n    let Selected = [];\n    for (let i = 0; i < checks.length; i++) {\n      if (checks[i] == true) {\n        Selected.push(keys[i]);\n      }\n    }\n    this.setState({\n      isSpiciness: false,\n    });\n    return Selected;\n  }\n  getSelectedCuisines() {\n    const keys = this.state.cuisinesData.map((k) => k.key);\n    var checks = this.state.cuisinesData.map((k) => k.checked);\n    let Selected = [];\n    for (let i = 0; i < checks.length; i++) {\n      if (checks[i] == true) {\n        Selected.push(keys[i]);\n      }\n    }\n    this.setState({\n      isCuisines: false,\n    });\n    return Selected;\n  }\n  getSelectedDietTypes() {\n    const keys = this.state.dietTypesData.map((k) => k.key);\n    var checks = this.state.dietTypesData.map((k) => k.checked);\n    let Selected = [];\n    for (let i = 0; i < checks.length; i++) {\n      if (checks[i] == true) {\n        Selected.push(keys[i]);\n      }\n    }\n    this.setState({\n      isDietTypes: false,\n    });\n    return Selected;\n  }\n  getSelectedAllergies() {\n    const keys = this.state.allergiesData.map((k) => k.key);\n    var checks = this.state.allergiesData.map((k) => k.checked);\n    let Selected = [];\n    for (let i = 0; i < checks.length; i++) {\n      if (checks[i] == true) {\n        Selected.push(keys[i]);\n      }\n    }\n    this.setState({\n      isAllergies: false,\n    });\n    return Selected;\n  }\n\n  onNext = () => {\n    const spicinessArray = this.getSelectedSpiciness();\n      const cuisinesArray = this.getSelectedCuisines();\n      const dietTypesArray = this.getSelectedDietTypes();\n      const allergiesArray = this.getSelectedAllergies();\n      const finalArray = [\n        ...spicinessArray,\n        ...cuisinesArray,\n        ...dietTypesArray,\n        ...allergiesArray,\n      ];\n    if (this.state.isSpiciness !== true || this.state.isAllergies !== true || this.state.isCuisines !== true || this.state.isDietTypes !== true) {\n      for (let i = 0; i < finalArray.length; i++) {\n        postChoice(finalArray[i]).then(\n          (res) => {\n            console.log(res)\n          },\n          (error) => {\n            console.log(error);\n            Alert.alert(\"Error\", `Something went wrong! ${error}`);\n          }\n        );\n      } \n      Alert.alert(\"successfull\",\"choices saved\")\n      this.props.navigation.navigate(\"DeliveryInfo1\")\n    }\n    else if(this.state.isSpiciness  === true && this.state.isAllergies === true && this.state.isCuisines === true && this.state.isDietTypes === true) {\n      Alert.alert(\n        \"Choices Missing\", \"Please Select Choices by switching tabs\"\n      );\n    }\n  };\n  // ***************************************change state dynimacally when user clicks any checkbox return an updated array *********************************************/\n  handleSpicinessChange = (update) => {\n    this.setState({\n      spicinessData: update,\n    });\n    // console.log(this.state.spicinessData);\n  };\n  handleAllergiesChange = (update) => {\n    this.setState({\n      allergiesData: update,\n    });\n    // console.log(this.state.allergiesData);\n  };\n  handleDietTypesChange = (update) => {\n    this.setState({\n      dietTypesData: update,\n    });\n    // console.log(this.state.dietTypesData);\n  };\n  handleCuisinesChange = (update) => {\n    this.setState({\n      cuisinesData: update,\n    });\n    // console.log(this.state.cuisinesData);\n  };\n\n  // ***************************************to render all tabs and pass props *********************************************/\n  createTopTabs = () => {\n    return (\n      <MaterialTopTabs.Navigator>\n        <MaterialTopTabs.Screen\n          name=\"Allergies\"\n          children={() => (\n            <AllergyOptions\n              allergies={this.state.allergiesData}\n              updateAllergies={this.handleAllergiesChange}\n            />\n          )}\n        />\n        <MaterialTopTabs.Screen\n          name=\"Cuisines\"\n          children={() => (\n            <CuisineOptions\n              cuisines={this.state.cuisinesData}\n              updateCuisines={this.handleCuisinesChange}\n            />\n          )}\n        />\n        <MaterialTopTabs.Screen\n          name=\"Diet Choices\"\n          children={() => (\n            <DietTypes\n              dietTypes={this.state.dietTypesData}\n              updateDietTypes={this.handleDietTypesChange}\n            />\n          )}\n        />\n        <MaterialTopTabs.Screen\n          name=\"Spiciness\"\n          children={() => (\n            <SpicinessOptions\n              spiciness={this.state.spicinessData}\n              updateSpiciness={this.handleSpicinessChange}\n            />\n          )}\n        />\n      </MaterialTopTabs.Navigator>\n    );\n  };\n\n  // *************************************** render all components *********************************************/\n  render() {\n    if (this.state.isLoaded) {\n      return (\n        <View\n          style={{ flex: 1, justifyContent: \"center\", alignItems: \"center\" }}\n        >\n          <ActivityIndicator size=\"large\" />\n        </View>\n      );\n    }else{\n      return (\n        <ScrollView>\n          <View style={styles.page}>\n            <H1 h1Text=\"Flavour Profile\" />\n            <Text>Tell us what you love</Text>\n            <NavigationContainer independent={true}>\n              {this.createTopTabs()}\n            </NavigationContainer>\n            <Button\n              title=\"Next\"\n              onPress={\n                () => {\n                  this.onNext();\n                }\n                // this.props.navigation.navigate(\"DeliveryInfo1\")\n              }\n            />\n          </View>\n        </ScrollView>\n      );\n    }\n    \n  }\n}\n\nconst styles = StyleSheet.create({\n  page: {\n    marginTop: 50,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}